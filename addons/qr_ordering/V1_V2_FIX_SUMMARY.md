# QR ç‚¹é¤ V1 å’Œ V2 ç‰ˆæœ¬ä¿®å¤æ€»ç»“

**ä¿®å¤æ—¶é—´**: 2026-01-06 23:15  
**æœåŠ¡å™¨**: ubuntu@54.65.127.141  
**ç¯å¢ƒ**: æµ‹è¯•ç¯å¢ƒ (seisei-test)

## âœ… å·²ä¿®å¤çš„ç‰ˆæœ¬

### V1 ç‰ˆæœ¬ (`qr_ordering.js`)
- âœ… æ‰€æœ‰ P0 å’Œ P1 é—®é¢˜å·²ä¿®å¤
- âœ… æ–‡ä»¶å·²éƒ¨ç½²åˆ°æœåŠ¡å™¨

### V2 ç‰ˆæœ¬ (`qr_ordering_v2.js`)
- âœ… æ‰€æœ‰ P0 å’Œ P1 é—®é¢˜å·²ä¿®å¤
- âœ… æ–‡ä»¶å·²éƒ¨ç½²åˆ°æœåŠ¡å™¨

## ğŸ“‹ ä¿®å¤å†…å®¹å¯¹æ¯”

### P0-1: è´­ç‰©è½¦ç©ºæ€åˆè®¡ä¸ä¸º0

**V1ç‰ˆæœ¬**:
- `renderCartItems()`: ç©ºæ€æ—¶å¼ºåˆ¶åˆè®¡ä¸º0ï¼Œä¸»CTAå˜ä¸º"å»ç‚¹é¤"
- `updateCartUI()`: ç©ºè´­ç‰©è½¦æ—¶é‡‘é¢ä¸º0

**V2ç‰ˆæœ¬**:
- `renderCartItems()`: ç©ºæ€æ—¶å¼ºåˆ¶åˆè®¡ä¸º0ï¼Œä¸»CTAå˜ä¸º"å»ç‚¹é¤"
- `updateCartUI()`: ç©ºè´­ç‰©è½¦æ—¶é‡‘é¢ä¸º0

### P0-2: åº•éƒ¨å›ºå®šæ¡é®æŒ¡

**V1ç‰ˆæœ¬**:
- `OverlayManager.open()`: æ‰“å¼€overlayæ—¶éšè—åº•éƒ¨æ 
- CSS: `.qr-bottom-bar.qr-hidden`

**V2ç‰ˆæœ¬**:
- `OverlayManager.open()`: æ‰“å¼€overlayæ—¶éšè—åº•éƒ¨æ 
- CSS: `.qr-v2-bottom-bar.qr-v2-hidden`

### P0-3: å¼¹çª—å å±‚

**V1ç‰ˆæœ¬**:
- `OverlayManager` å•ä¾‹ç®¡ç†å™¨ï¼ˆå·²å­˜åœ¨ï¼‰

**V2ç‰ˆæœ¬**:
- æ–°å¢ `OverlayManager` å•ä¾‹ç®¡ç†å™¨

### P0-4: é‡‘é¢å£å¾„ä¸€è‡´

**V1ç‰ˆæœ¬**:
- åº•éƒ¨æ¡é‡‘é¢ = å½“å‰è´­ç‰©è½¦
- ä¸‹å•æˆåŠŸåæ¸…é›¶

**V2ç‰ˆæœ¬**:
- åº•éƒ¨æ¡é‡‘é¢ = å½“å‰è´­ç‰©è½¦
- ä¸‹å•æˆåŠŸåæ¸…é›¶

### P1-5: ç±»åˆ«ç©ºæ€å¢å¼º

**V1ç‰ˆæœ¬**:
- `renderProducts()`: æ·»åŠ "è¿”å›å…¨éƒ¨"ã€"æŸ¥çœ‹æ¨è"ã€"æŸ¥çœ‹å·²ç‚¹"æŒ‰é’®

**V2ç‰ˆæœ¬**:
- `renderProductGrid()`: æ·»åŠ "è¿”å›å…¨éƒ¨"ã€"æŸ¥çœ‹æ¨è"ã€"æŸ¥çœ‹å·²ç‚¹"æŒ‰é’®
- æ–°å¢ `window.qrV2.filterHighlight()` æ–¹æ³•

### P1-6: èœå“å¡ç‰‡æ˜¾ç¤ºå·²ç‚¹æ•°é‡

**V1ç‰ˆæœ¬**:
- é€šè¿‡ `cartQtyMap` æ˜¾ç¤ºæ•°é‡badge

**V2ç‰ˆæœ¬**:
- é€šè¿‡ `getProductQty()` æ˜¾ç¤ºstepperæ•°é‡

### P1-7: å·²ä¸‹å•åˆ—è¡¨ä¼˜åŒ–

**V1ç‰ˆæœ¬**:
- `renderOrders()`: æ˜¾ç¤ºçŸ­è®¢å•å·ï¼ˆ#XXXXï¼‰

**V2ç‰ˆæœ¬**:
- V2ç‰ˆæœ¬æš‚æ— å·²ä¸‹å•åˆ—è¡¨æ¸²æŸ“å‡½æ•°ï¼ˆéœ€è¦ç¡®è®¤ï¼‰

## ğŸ” å¦‚ä½•ç¡®è®¤å½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬

### æ–¹æ³•1: æ£€æŸ¥URLå‚æ•°
- V1: æ—  `menu_ui_v2=1` å‚æ•°
- V2: æœ‰ `menu_ui_v2=1` å‚æ•°

### æ–¹æ³•2: æ£€æŸ¥ç³»ç»Ÿå‚æ•°
```bash
docker exec seisei-test-web-1 odoo shell -d seisei_test --no-http << 'EOF'
env['ir.config_parameter'].sudo().get_param('qr_ordering.menu_ui_v2', 'false')
EOF
```

### æ–¹æ³•3: æŸ¥çœ‹é¡µé¢æºç 
- V1: åŒ…å« `qr-ordering-app` ID
- V2: åŒ…å« `qr-app-v2` ID

## ğŸš€ éƒ¨ç½²çŠ¶æ€

### å·²éƒ¨ç½²çš„æ–‡ä»¶

1. **V1ç‰ˆæœ¬**:
   - âœ… `static/src/js/qr_ordering.js` (62K)
   - âœ… `static/src/css/qr_ordering.css` (26K)

2. **V2ç‰ˆæœ¬**:
   - âœ… `static/src/js/qr_ordering_v2.js` (29K)
   - âœ… `static/src/css/qr_ordering_v2.css` (18K)

### å®¹å™¨çŠ¶æ€
- âœ… `seisei-test-web-1` å·²é‡å¯
- âœ… æ¨¡å—å·²å‡çº§

## ğŸ“ éªŒè¯æ­¥éª¤

### å¦‚æœä½¿ç”¨V1ç‰ˆæœ¬
1. è®¿é—®ç‚¹é¤é¡µé¢ï¼ˆæ—  `menu_ui_v2=1` å‚æ•°ï¼‰
2. æŒ‰ç…§ `FIX_REPORT.md` ä¸­çš„æµ‹è¯•æ¸…å•éªŒè¯

### å¦‚æœä½¿ç”¨V2ç‰ˆæœ¬
1. è®¿é—®ç‚¹é¤é¡µé¢ï¼ˆå¸¦ `menu_ui_v2=1` å‚æ•°æˆ–ç³»ç»Ÿå‚æ•°å·²å¯ç”¨ï¼‰
2. éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š
   - [ ] æ‰“å¼€ç©ºè´­ç‰©è½¦ â†’ åˆè®¡æ˜¾ç¤º Â¥0
   - [ ] æ‰“å¼€è´­ç‰©è½¦ â†’ åº•éƒ¨æ éšè—
   - [ ] ä¸‹å•æˆåŠŸ â†’ toastæ˜¾ç¤ºï¼Œä¸å å±‚
   - [ ] ç±»åˆ«ç©ºæ€ â†’ æ˜¾ç¤ºæ“ä½œæŒ‰é’®
   - [ ] èœå“å¡ç‰‡ â†’ æ˜¾ç¤ºå·²ç‚¹æ•°é‡

## âš ï¸ æ³¨æ„äº‹é¡¹

- å¦‚æœçœ‹ä¸åˆ°å˜åŒ–ï¼Œè¯·ï¼š
  1. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**ï¼ˆé‡è¦ï¼ï¼‰
  2. å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+F5 æˆ– Cmd+Shift+Rï¼‰
  3. æ£€æŸ¥å½“å‰ä½¿ç”¨çš„æ˜¯V1è¿˜æ˜¯V2ç‰ˆæœ¬
  4. ç¡®è®¤URLä¸­æ˜¯å¦æœ‰ `menu_ui_v2=1` å‚æ•°

- V2ç‰ˆæœ¬é»˜è®¤ä¸å¯ç”¨ï¼Œéœ€è¦ï¼š
  - URLå‚æ•°: `?menu_ui_v2=1`
  - æˆ–ç³»ç»Ÿå‚æ•°: `qr_ordering.menu_ui_v2 = true`

